(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{290:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(571),i=t(568),c=t(53),o=t(64),s=t(592),d=t(7),u=t(175),m=t(182),p=t(598),g=t(55);var b=function(e){var a=e.indicators,t=e.permission,n=t.authType,l=t.roles,i=Object(u.a)(n).isAdminOrContributor(l);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement(p.a,{roles:[g.a,g.f]},r.a.createElement("div",{className:"col-md-3 operations-btn-group-vertical"},i&&r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-8 col-md-offset-2"},r.a.createElement(m.a,{to:"/operations/indicator/create",col:8,offset:2,className:"btn btn-operations btn-lg col-md-12"},r.a.createElement("span",{className:"glyphicon glyphicon-plus","aria-hidden":"true"}),r.a.createElement("span",null," ",d.a.btnNewMale)))))),r.a.createElement("div",{className:"col-md-8 centered pull-right operations-list"},r.a.createElement(o.a,{title:d.a.indicatorsSearchTitle,col:12,offset:0}),r.a.createElement(s.a,{items:a,childPath:"operations/indicator",label:"label",advancedSearch:!0,searchUrl:"/operations/indicators/search"})))))},f=t(680),h=t(27),L=t(5),E=t(28);var v={loadIndicatorsList:f.a},y=Object(h.b)(function(e){if(!e.operationsIndicatorsList)return{status:L.g,indicators:[]};var a=e.operationsIndicatorsList,t=a.results,n=a.status,r=a.err;return{indicators:t,status:n,permission:E.x(e),err:r}},v)(function(e){var a=e.indicators,t=e.status,n=e.permission;return t!==L.c?r.a.createElement(c.a,{textType:"loading"}):r.a.createElement(b,{indicators:a,permission:n})}),N=t(664),O=t(12),j=t(13),C=t(15),w=t(14),S=t(16),k=t(570),x=t(578),I=t(580),T=t(581),A=t(84),B=t(583),F=t(683),M=t(681),P=t(682);function q(e){var a=e.value1,t=e.value2,n=e.title,l=e.langs,i=l.lg1,c=l.lg2,o=e.secondLang;return r.a.createElement("div",{className:"row"},r.a.createElement(B.a,{text:a,title:n,lang:i,alone:!o,allowEmpty:!0}),o&&r.a.createElement(B.a,{text:t,title:n,lang:c,alone:!1,allowEmpty:!0}))}var R=function(e){var a=e.attr,t=e.langs,n=e.secondLang,l=e.frequency,i=void 0===l?{}:l,c=e.organisations,o=void 0===c?[]:c,s=Object(F.a)(a.seeAlso),u=(o.find(function(e){return e.id===a.creator})||{}).label,m=(a.contributor||[]).map(function(e){return o.find(function(a){return a.id===e.id})||{}});return r.a.createElement(r.a.Fragment,null,r.a.createElement(q,{value1:a.altLabelLg1,value2:a.altLabelLg2,title:d.a.altLabel,langs:t,secondLang:n}),r.a.createElement(q,{value1:a.abstractLg1,value2:a.abstractLg2,title:d.a.summary,langs:t,secondLang:n}),r.a.createElement(q,{value1:a.historyNoteLg1,value2:a.historyNoteLg2,title:d.a.history,langs:t,secondLang:n}),r.a.createElement(q,{value1:i.labelLg1,value2:i.labelLg2,title:d.a.indicatorDataCollectFrequency,langs:t,secondLang:n}),r.a.createElement("div",{className:"row"},r.a.createElement(B.a,{text:u,title:d.a.organisation,lang:t.lg1,alone:!0,allowEmpty:!0})),r.a.createElement(M.a,{links:m,title:d.a.stakeholders,langs:t,secondLang:!1,displayLink:!1,labelLg1:"label"}),r.a.createElement(M.a,{links:a.replaces,path:"/operations/indicator/",title:d.a.replaces,langs:t,secondLang:n}),r.a.createElement(M.a,{links:a.isReplacedBy,path:"/operations/indicator/",title:d.a.replacedBy,langs:t,secondLang:n}),r.a.createElement(M.a,{links:a.wasGeneratedBy,path:"/operations/series/",title:d.a.generatedBy,langs:t,secondLang:n}),r.a.createElement(P.a,{links:s,langs:t,secondLang:n}))},W=t(647),G=t(54),U=t(125),V=t(169),z=t(588),D=Object(x.a)("id"),J=function(e){function a(){return Object(O.a)(this,a),Object(C.a)(this,Object(w.a)(a).apply(this,arguments))}return Object(S.a)(a,e),Object(j.a)(a,[{key:"componentWillMount",value:function(){this.props.indicator.id||this.props.loadIndicator(this.props.id)}},{key:"componentWillReceiveProps",value:function(e){this.props.id!==e.id&&this.props.loadIndicator(e.id)}},{key:"render",value:function(){var e=this.props,a=e.secondLang,t=e.langs,n=Object(N.a)({},e.indicator),l=e.frequency,i=e.organisations;return n.id?r.a.createElement("div",{className:"container"},r.a.createElement(T.a,{secondLang:a,onChange:this.props.saveSecondLang}),r.a.createElement(z.a,{titleLg1:n.prefLabelLg1,titleLg2:n.prefLabelLg2,secondLang:a}),r.a.createElement("div",{className:"row btn-line action-toolbar"},r.a.createElement(G.a,{action:Object(I.a)(this.props,"/operations/indicators"),label:d.a.btnReturn}),r.a.createElement("div",{className:"empty-center"}),n.idSims&&r.a.createElement(r.a.Fragment,null,r.a.createElement(G.a,{action:"/operations/sims/".concat(n.idSims),label:d.a.btnSimsVisu})),!n.idSims&&r.a.createElement(p.a,{roles:[g.a,g.g,g.f]},r.a.createElement(G.a,{action:"/operations/indicator/".concat(n.id,"/sims/create"),label:d.a.btnSimsCreate})),r.a.createElement(p.a,{roles:[g.a,g.f]},r.a.createElement(G.a,{label:d.a.btnValid})),r.a.createElement(p.a,{roles:[g.a,g.f]},r.a.createElement(G.a,{action:"/operations/indicator/".concat(n.id,"/modify"),label:d.a.btnUpdate}))),r.a.createElement(R,{secondLang:a,attr:n,langs:t,frequency:l,organisations:i})):r.a.createElement(c.a,{textType:"loading"})}}]),a}(n.Component),H={saveSecondLang:A.b,loadIndicator:W.a},K=Object(k.a)(Object(h.b)(function(e,a){var t=D(a),n=E.r(e),r=e.operationsCodesList.results[U.a]||{},l=e.operationsOrganisations.results||[];return{id:t,indicator:n.id===t?n:{},langs:E.s(e),secondLang:Object(V.b)(e),frequency:r.codes.find(function(e){return e.code===n.accrualPeriodicityCode}),organisations:l}},H)(J)),Q=t(6),X=t(4),Y=t(590),Z=t(610),$=t(631),_=t(602),ee=t(611);var ae=function(e){var a=e.onSubmit,t=e.indicator,n=e.errorMessage;return r.a.createElement("div",{className:"row btn-line action-toolbar"},r.a.createElement(_.a,{action:t.id?"/operations/indicator/".concat(t.id):"/operations/indicators"}),r.a.createElement(ee.a,{error:n}),r.a.createElement(_.c,{action:a,disabled:n}))},te=t(91),ne=t(645);var re={prefLabelLg1:"",prefLabelLg2:"",altLabelLg1:"",altLabelLg2:"",abstractLg1:"",abstractLg2:"",historyNoteLg1:"",historyNoteLg2:"",accrualPeriodicityList:U.a},le=function(e){function a(e){var t;return Object(O.a)(this,a),(t=Object(C.a)(this,Object(w.a)(a).call(this,e))).setInitialState=function(e){return{serverSideError:"",indicator:Object(X.a)({},re,e.indicator)}},t.onChange=function(e){return function(a){t.setState({serverSideError:"",indicator:Object(X.a)({},t.state.indicator,Object(Q.a)({},e,a))})}},t.onSubmit=function(){var e=!t.state.indicator.id;t.props.saveIndicator(t.state.indicator,function(a,n){a?t.setState({serverSideError:a}):Object(I.b)(t.props,"/operations/indicator/".concat(n),e)})},t.state=t.setInitialState(e),t.onChanges=["prefLabelLg1","prefLabelLg2","altLabelLg1","altLabelLg2","abstractLg1","abstractLg2","historyNoteLg1","historyNoteLg2","creator","accrualPeriodicityCode"].reduce(function(e,a){return Object(X.a)({},e,Object(Q.a)({},a,t.onChange(a)))},{}),t}return Object(S.a)(a,e),Object(j.a)(a,[{key:"componentWillReceiveProps",value:function(e){e.indicator.id!==this.props.indicator.id&&this.setState(this.setInitialState(e))}},{key:"render",value:function(){var e=this;if(this.props.operationsAsyncTask)return r.a.createElement(c.a,{textType:"saving"});var a=this.props,t=a.langs,n=t.lg1,l=t.lg2,i=a.frequencies,o=a.organisations,s=a.indicators,u=a.series,m=!!this.state.indicator.id,p=Object(X.a)({},this.state.indicator,{seeAlso:(this.state.indicator.seeAlso||[]).map(function(e){return e.id}),contributor:(this.state.indicator.contributor||[]).map(function(e){return e.id}),wasGeneratedBy:(this.state.indicator.wasGeneratedBy||[]).map(function(e){return e.id}),replaces:(this.state.indicator.replaces||[]).map(function(e){return e.id}),replacedBy:(this.state.indicator.isReplacedBy||[]).map(function(e){return e.id})}),g=Object(ne.b)(o),b=Object(ne.b)(u,"series"),f=Object(ne.b)(s.filter(function(e){return e.id!==p.id}),"indicator"),h=Object(ne.a)(f,b),L=function(e){return{fields:{prefLabelLg1:!e.prefLabelLg1,prefLabelLg2:!e.prefLabelLg2},errorMessage:e.prefLabelLg1&&e.prefLabelLg2?"":d.a.requiredPrefLabel}}(this.state.indicator),E=L.errorMessage||this.state.serverSideError;return r.a.createElement("div",{className:"container editor-container"},m&&r.a.createElement(z.a,{titleLg1:p.prefLabelLg1,titleLg2:p.prefLabelLg2,secondLang:!0}),r.a.createElement(ae,{indicator:this.state.indicator,onSubmit:this.onSubmit,errorMessage:E}),r.a.createElement("form",null,r.a.createElement("h4",{className:"centered"},"( ",r.a.createElement("span",{className:"boldRed"},"*")," : ",d.a.requiredFields,")"),r.a.createElement("div",{className:"row"},r.a.createElement($.a,{colMd:6,value:p.prefLabelLg1,label:d.a.title,lang:n,star:!0,handleChange:this.onChanges.prefLabelLg1,arias:{"aria-invalid":L.fields.prefLabelLg1}}),r.a.createElement($.a,{colMd:6,value:p.prefLabelLg2,label:d.a.title,lang:l,star:!0,handleChange:this.onChanges.prefLabelLg2,arias:{"aria-invalid":L.fields.prefLabelLg2}})),r.a.createElement("div",{className:"row"},r.a.createElement($.a,{colMd:6,value:p.altLabelLg1,label:d.a.altLabel,lang:n,handleChange:this.onChanges.altLabelLg1}),r.a.createElement($.a,{colMd:6,value:p.altLabelLg2,label:d.a.altLabel,lang:l,handleChange:this.onChanges.altLabelLg2})),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",{htmlFor:"abstractLg1"},r.a.createElement(Y.a,{text:d.a.summary,lang:n})),r.a.createElement(Z.a,{text:p.abstractLg1,handleChange:this.onChanges.abstractLg1})),r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",{htmlFor:"abstractLg2"},r.a.createElement(Y.a,{text:d.a.summary,lang:l})),r.a.createElement(Z.a,{text:p.abstractLg2,handleChange:this.onChanges.abstractLg2}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",{htmlFor:"historyNoteLg1"},r.a.createElement(Y.a,{text:d.a.history,lang:n})),r.a.createElement(Z.a,{text:p.historyNoteLg1,handleChange:this.onChanges.historyNoteLg1})),r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",{htmlFor:"historyNoteLg2"},r.a.createElement(Y.a,{text:d.a.history,lang:l})),r.a.createElement(Z.a,{text:p.historyNoteLg2,handleChange:this.onChanges.historyNoteLg2}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"form-group col-md-12"},r.a.createElement("label",{htmlFor:"accrualPeriodicity",className:"full-label"},d.a.indicatorDataCollectFrequency,r.a.createElement(te.a,{placeholder:"",unclearable:!0,value:p.accrualPeriodicityCode,options:i.codes.map(function(e){return{value:e.code,label:e.labelLg1}}),onChange:this.onChange("accrualPeriodicityCode")})))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"form-group col-md-12"},r.a.createElement("label",{htmlFor:"creator",className:"full-label"},d.a.organisation,r.a.createElement(te.a,{unclearable:!0,value:p.creator,options:g,placeholder:"",onChange:this.onChanges.creator})))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"form-group col-md-12"},r.a.createElement("label",{className:"full-label"},d.a.stakeholders,r.a.createElement(te.a,{unclearable:!0,value:p.contributor,options:g,placeholder:"",multi:!0,onChange:function(a){return e.onChange("contributor")(a.map(function(e){return{id:e.value}}))}})))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"form-group col-md-12"},r.a.createElement("label",{className:"full-label"},d.a.replaces,r.a.createElement(te.a,{unclearable:!0,value:p.replaces,options:f,placeholder:"",onChange:function(a){return e.onChange("replaces")(a.map(function(e){return{id:e.value,type:e.type}}))},multi:!0})))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"form-group col-md-12"},r.a.createElement("label",{className:"full-label"},d.a.replacedBy,r.a.createElement(te.a,{unclearable:!0,value:p.replacedBy,options:f,placeholder:"",onChange:function(a){return e.onChange("isReplacedBy")(a.map(function(e){return{id:e.value,type:e.type}}))},multi:!0})))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"form-group col-md-12"},r.a.createElement("label",{className:"full-label"},d.a.generatedBy,r.a.createElement(te.a,{unclearable:!0,value:p.wasGeneratedBy,options:b,multi:!0,placeholder:"",onChange:function(a){return e.onChange("wasGeneratedBy")(a.map(function(e){return{id:e.value,type:e.type}}))}})))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"form-group col-md-12"},r.a.createElement("label",{htmlFor:"seeAlso",className:"full-label"},d.a.seeAlso,r.a.createElement(te.a,{unclearable:!0,value:p.seeAlso,options:h,placeholder:"",onChange:function(a){return e.onChange("seeAlso")(a.map(function(e){return{id:e.value,type:e.type}}))},multi:!0}))))))}}]),a}(n.Component),ie=Object(x.a)("id"),ce=function(e){function a(){return Object(O.a)(this,a),Object(C.a)(this,Object(w.a)(a).apply(this,arguments))}return Object(S.a)(a,e),Object(j.a)(a,[{key:"componentWillMount",value:function(){!this.props.indicator.id&&this.props.id&&this.props.loadIndicator(this.props.id)}},{key:"render",value:function(){return this.props.indicator?r.a.createElement(le,this.props):r.a.createElement(c.a,{textType:"loading"})}}]),a}(n.Component),oe={loadIndicator:W.a,saveIndicator:W.b},se=Object(k.a)(Object(h.b)(function(e,a){var t=ie(a)||"";return{id:t,indicator:t?E.r(e):{},langs:E.s(e),frequencies:e.operationsCodesList.results[U.a]||{},operationsAsyncTask:e.operationsAsyncTask,organisations:e.operationsOrganisations.results,indicators:e.operationsIndicatorsList.results||[],series:e.operationsSeriesList.results||[]}},oe)(ce)),de=t(625),ue=t(579),me=t(30),pe=t(626),ge=Object(me.h)(["prefLabelLg1"]),be=["prefLabelLg1"],fe=function(e){function a(e){var t;return Object(O.a)(this,a),(t=Object(C.a)(this,Object(w.a)(a).call(this,e,a.defaultState))).handlers=t.handleChange(be,function(e){var a=e.prefLabelLg1;return t.props.data.filter(ge(a))}),t}return Object(S.a)(a,e),Object(j.a)(a,[{key:"render",value:function(){var e=this,a=this.state,t=a.data,n=a.prefLabelLg1,l=t.map(function(e){var a=e.id,t=e.prefLabelLg1;return r.a.createElement("li",{key:a,className:"list-group-item"},r.a.createElement(m.a,{to:"/operations/indicator/".concat(a)},t))});return r.a.createElement(pe.a,{title:d.a.indicatorsSearchTitle,data:l,backUrl:"/operations/getIndicators",initializeState:this.initializeState},r.a.createElement("div",{className:"row form-group"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("input",{value:n,onChange:function(a){return e.handlers.prefLabelLg1(a.target.value)},type:"text",placeholder:d.a.searchLabelPlaceholder,className:"form-control"}))))}}]),a}(de.a);fe.defaultState={prefLabelLg1:""};var he=function(e){function a(e){var t;return Object(O.a)(this,a),(t=Object(C.a)(this,Object(w.a)(a).call(this,e))).state={},t}return Object(S.a)(a,e),Object(j.a)(a,[{key:"componentWillMount",value:function(){var e=this;ue.a.getIndicatorsSearchList().then(function(a){e.setState({data:a})})}},{key:"render",value:function(){var e=this.state.data;return e?r.a.createElement(fe,{data:e}):r.a.createElement(c.a,{textType:"loading",context:"concepts"})}}]),a}(n.Component);a.default=function(){return r.a.createElement(l.a,null,r.a.createElement(i.a,{exact:!0,path:"/operations/indicators",component:y}),r.a.createElement(i.a,{exact:!0,path:"/operations/indicators/search",component:he}),r.a.createElement(i.a,{exact:!0,path:"/operations/indicator/create",component:se}),r.a.createElement(i.a,{exact:!0,path:"/operations/indicator/:id",component:K}),r.a.createElement(i.a,{exact:!0,path:"/operations/indicator/:id/modify",component:se}))}},631:function(e,a,t){"use strict";var n=t(0),r=t.n(n),l=t(597);a.a=function(e){var a=e.colMd,t=e.value,n=e.label,i=e.lang,c=e.star,o=e.hiddenStar,s=e.disabled,d=e.password,u=e.handleChange,m=e.arias;return r.a.createElement("div",{className:"form-group col-md-".concat(a||12)},r.a.createElement("label",{className:"form-label"},n," ",Object(l.a)(i)?"( ":null," ",Object(l.a)(i)," ",Object(l.a)(i)?" )":null,c&&r.a.createElement("span",{className:"boldRed"},"*"),o&&r.a.createElement("span",{className:"boldWhite"},"*"),r.a.createElement("input",Object.assign({type:d?"password":"text",value:t||"",className:"form-control",disabled:s,onChange:function(e){return u(e.target.value)}},m))))}},645:function(e,a,t){"use strict";t.d(a,"b",function(){return c}),t.d(a,"a",function(){return o});var n=t(38),r=t(4),l=t(30),i=Object(l.k)("label");function c(e,a){return e.map(function(e){return Object(r.a)({},e,{value:e.id,label:e.label,type:a})})}function o(){for(var e=arguments.length,a=new Array(e),t=0;t<e;t++)a[t]=arguments[t];return i(a.reduce(function(e,a){return[].concat(Object(n.a)(e),Object(n.a)(a))},[])).map(function(e){return Object(r.a)({},e,{label:"".concat(e.type," - ").concat(e.label)})})}},647:function(e,a,t){"use strict";t.d(a,"b",function(){return i});var n=t(579),r=t(1),l=t(589),i=function(e,a){return function(t){t({type:r.Ad,payload:e});var l=e.id?"putIndicator":"postIndicator";return n.a[l](e).then(function(n){t({type:r.Cd,payload:{id:n,prefLabelLg1:e.prefLabelLg1,altLabel:e.altLabelLg1}}),a(null,n)},function(e){t({type:r.Bd,payload:{err:e}}),a(e)})}};a.a=Object(l.b)(n.a.getIndicator,r.Rc,r.Vc,r.Tc)},680:function(e,a,t){"use strict";var n=t(579),r=t(1),l=t(589);a.a=function(){return Object(l.a)(n.a.getIndicatorsList,r.Sc,r.Uc,r.Tc)}},681:function(e,a,t){"use strict";var n=t(0),r=t.n(n),l=t(583),i=t(182);a.a=function(e){var a=e.links,t=void 0===a?[]:a,n=e.path,c=e.title,o=e.langs,s=o.lg1,d=o.lg2,u=e.secondLang,m=e.displayLink,p=void 0===m||m,g=e.labelLg1,b=void 0===g?"labelLg1":g,f=e.labelLg2,h=void 0===f?"labelLg2":f;function L(e,a){return p?r.a.createElement(i.a,{to:"".concat(n).concat(e.id)},e[a]):r.a.createElement("p",null,e[a])}function E(e){return r.a.createElement("ul",null,t.sort().map(function(a){return r.a.createElement("li",{key:a.id},L(a,e))}))}function v(e){return L(t[0],e)}return r.a.createElement("div",{className:"row"},r.a.createElement(l.a,{text:1===t.length?v(b):E(b),title:c,lang:s,alone:!u,allowEmpty:!0}),u&&r.a.createElement(l.a,{text:1===t.length?v(h):E(h),title:c,lang:d,alone:!1,allowEmpty:!0}))}},682:function(e,a,t){"use strict";var n=t(0),r=t.n(n),l=t(583),i=t(7),c=t(182);a.a=function(e){var a=e.links,t=e.langs,n=t.lg1,o=t.lg2,s=e.secondLang;function d(e){function t(a,t,n){return a&&r.a.createElement("li",null,t,r.a.createElement("ul",null,a.map(function(a){return r.a.createElement("li",{key:a.id},r.a.createElement(c.a,{to:"".concat(n,"/").concat(a.id)},a[e]))})))}return r.a.createElement("ul",null,t(a.indicator,i.a.indicatorsTitle,"/operations/indicator"),t(a.operation,i.a.operationsTitle,"/operations/operation"),t(a.series,i.a.seriesTitle,"/operations/series"),t(a.family,i.a.familiesTitle,"/operations/family"))}return r.a.createElement("div",{className:"row"},r.a.createElement(l.a,{text:d("labelLg1"),title:i.a.seeAlso,lang:n,alone:!s,allowEmpty:!0}),s&&r.a.createElement(l.a,{text:d("labelLg2"),title:i.a.seeAlso,lang:o,alone:!1,allowEmpty:!0}))}},683:function(e,a,t){"use strict";t.d(a,"a",function(){return i});var n=t(6),r=t(38),l=t(4);function i(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce(function(e,a){return Object(l.a)({},e,Object(n.a)({},a.type,[].concat(Object(r.a)(e[a.type]||[]),[a])))},{})}}}]);
//# sourceMappingURL=15.b109d978.chunk.js.map